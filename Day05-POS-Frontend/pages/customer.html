<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customers</title>
</head>
<body>
<div id="navigation">
    <button onclick="window.location.href='customer.html'">Customers</button>
    <button onclick="window.location.href='item.html'">Items</button>
    <button onclick="window.location.href='order.html'">Orders</button>
    <button onclick="window.location.href='../index.html'">Home</button>
</div>
<h1>Customers</h1>
<div id="customer-data">
    <input type="text" id="customer-id" placeholder="Customer ID">
    <input type="text" id="customer-name" placeholder="Customer Name">
    <input type="text" id="customer-address" placeholder="Customer Address">
    <button onclick="saveCustomer()"> Save </button>
    <button onclick="updateCustomer()"> Update </button>
    <button onclick="deleteCustomer()"> Delete </button>
</div>
<div id="customers">
    <table id="customer-table">
        <thead>
        <tr>
            <th>Id</th>
            <th>Customer Name</th>
            <th>Customer Address</th>
        </tr>
        </thead>
        <tbody id="tableBody">

        </tbody>
    </table>
</div>
<script src="../assests/js/jquery-3.7.1.min.js"></script>
<script>
    function saveCustomer() {
        const cid = $("#customer-id").val();
        const cname = $("#customer-name").val();
        const caddress = $("#customer-address").val();
        //ajax request (POST)
        $.ajax({
            url:'http://localhost:8080/Day05_POS_Backend_Web_exploded/api/v1/customer',
            method:'POST',
            contentType:'application/json',
            data:JSON.stringify({
                "cid":cid,
                "cname":cname,
                "caddress":caddress
            }),
            success:function (response) {
                console.log(response)
            },
            error:function (error) {
                console.log(error)
            }
        })

    }
    function updateCustomer() {
        const cid = $("#customer-id").val();
        const cname = $("#customer-name").val();
        const caddress = $("#customer-address").val();
        //ajax request (POST)
        $.ajax({
            url:'http://localhost:8080/Day05_POS_Backend_Web_exploded/api/v1/customer',
            method:'PUT',
            contentType:'application/json',
            data:JSON.stringify({
                "cid":cid,
                "cname":cname,
                "caddress":caddress
            }),
            success:function (response) {
                console.log(response)
            },
            error:function (error) {
                console.log(error)
            }
        })
    }
    function deleteCustomer() {
        alert("Customer Deleted")
    }

    function getAllCustomer() {
       $.ajax({
           url:'http://localhost:8080/Day05_POS_Backend_Web_exploded/api/v1/customer',
           method:'GET',
           success:function (response) {
               for (let customer of response){
                   const tablerow="<tr> <td>"+customer.cid+"</td> <td>"+customer.cname+"</td><td>"+customer.caddress+"</td></tr>"
                   $("#tableBody").append(tablerow)
               }
           },
           error:function (error) {
               console.log(error)
           }
       })
    }
    window.onload(
        getAllCustomer()
    )
</script>
</body>
</html>